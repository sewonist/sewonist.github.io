<!DOCTYPE html>
<html lang="ko">
<head>
    <title>tween</title>
    <meta charset="utf-8"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,target-densitydpi=medium-dpi" />
    <link rel="shortcut icon" href="http://blog.bsidesoft.com/favicon.ico" type="image/x-icon">
    <script src="../../bsJS/bsjs.0.3.js"></script>
</head>
<body>
    <div id="stage"></div>
<script>
bs(function(){
    bs.Css('body').S('margin', '0px');
    bs.Css('#stage').S('position', 'absolute', 'width', '100%', 'height', '100%', 'background', '#eee');
    bs.Css('.rect').S('position', 'absolute');

    // 이동 트윈은 left, top 속성으로 트윈할 거라서 초기 값을 지정해주어야 함.
    // 초기 값이 없으면 트윈이 안됨.
    var rect_1 = bs.Dom('<div></div>').S('<', '#stage', 'class', 'rect', 'left', 0, 'top', 0,  'width', 50, 'height', 50, 'background', '#ff0000', 'this');
    var rect_2 = bs.Dom('<div></div>').S('<', '#stage', 'class', 'rect', 'right', 0, 'top', 0, 'width', 20, 'height', 20, 'background', '#00ff00', 'this');
    var rect_3 = bs.Dom('<div></div>').S('<', '#stage', 'class', 'rect', 'left', 0, 'bottom', 0, 'width', 20, 'height', 20, 'background', '#00ff00', 'this');
    var rect_4 = bs.Dom('<div></div>').S('<', '#stage', 'class', 'rect', 'left', 150, 'bottom', 150, 'width', 100, 'height', 100, 'background', '#00ffff', 'transform', 'rotate(0deg)', 'this');
    var rect_5 = bs.Dom('<div></div>').S('<', '#stage', 'class', 'rect', 'left', 0, 'top', 250, 'width', 100, 'height', 100, 'background', '#00ffff', 'transform', 'rotate(0deg)', 'this');
    var rect_6 = bs.Dom('<div></div>').S('<', '#stage', 'class', 'rect', 'left', 10, 'top', 10, 'width', 20, 'height', 20, 'background', '#ffff00', 'this');
    var rect_7 = bs.Dom('<div></div>').S('<', '#stage', 'class', 'rect', 'left', 200, 'top', 500, 'width', 20, 'height', 20, 'background', '#ffff00', 'this');

    (function repeat1(){
        bs.ANI.tween(rect_1, 'left', bs.Dom('#stage').S('w')-bs.Dom(rect_1).S('w'), 'top', bs.Dom('#stage').S('h')-bs.Dom(rect_1).S('h'), 'ease', 'bounceOut', 'time', 2, 'end', function(){
            console.log('end');
            bs.ANI.tween(rect_1, 'left', 0, 'top', 0, 'ease', 'bounceOut', 'time', 2, 'end', function(){
                console.log('end');
                repeat1();
            }, 'update', function(){
                console.log('update');
            });
        }, 'update', function(){
            console.log('update');
        });
    })();

    (function repeat2(){
        bs.ANI.tween(rect_2, 'width', 100, 'height', 100, 'ease', 'bounceOut', 'time', 2, 'end', function(){
            console.log('end');
            bs.ANI.tween(rect_2, 'width', 20, 'height', 20, 'ease', 'bounceOut', 'time', 2, 'end', function(){
                console.log('end');
                repeat2();
            }, 'update', function(){
                console.log('update');
            });
        }, 'update', function(){
            console.log('update');
        });
    })();

    (function repeat3(){
        bs.ANI.tween(rect_3, 'width', 100, 'height', 100, 'ease', 'bounceOut', 'time', 2, 'end', function(){
            console.log('end');
            bs.ANI.tween(rect_3, 'width', 20, 'height', 20, 'ease', 'bounceOut', 'time', 2, 'end', function(){
                console.log('end');
                repeat3();
            }, 'update', function(){
                console.log('update');
            });
        }, 'update', function(){
            console.log('update');
        });
    })();

    (function repeat4(){
        bs.ANI.tween(rect_5, 'left', bs.Dom('#stage').S('w')-bs.Dom(rect_5).S('w'), 'ease', 'bounceOut', 'time', 2, 'end', function(){
            console.log('end');
            bs.ANI.tween(rect_5, 'left', 0, 'ease', 'bounceOut', 'time', 2, 'end', function(){
                console.log('end');
                repeat4();
            }, 'update', function(){
                console.log('update');
            });
        }, 'update', function(){
            console.log('update');
        });
    })();

    (function repeat5(){
        bs.ANI.tween(rect_6, 'left', 100, 'top', 100,  'width', 200, 'height', 200, 'ease', 'bounceOut', 'time', 2, 'end', function(){
            console.log('end');
            bs.ANI.tween(rect_6, 'left', 10, 'top', 10,  'width', 20, 'height', 20, 'ease', 'bounceOut', 'time', 2, 'end', function(){
                console.log('end');
                repeat5();
            }, 'update', function(){
                console.log('update');
            });
        }, 'update', function(){
            console.log('update');
        });
    })();

    (function repeat6(){
        bs.ANI.tween(rect_7, 'left', 100, 'top', 400,  'width', 200, 'height', 200, 'ease', 'bounceOut', 'time', 2, 'end', function(){
            console.log('end');
            bs.ANI.tween(rect_7, 'left', 200, 'top', 500,  'width', 20, 'height', 20, 'ease', 'bounceOut', 'time', 2, 'end', function(){
                console.log('end');
                repeat6();
            }, 'update', function(){
                console.log('update');
            });
        }, 'update', function(){
            console.log('update');
        });
    })();

    var rotate_1 = {
        count:0, //최초 카운트 0
        ANI:function( $time ){
            bs.Dom(rect_4).S('transform', 'rotate('+(++this.count)+'deg)');
            console.log( this.count + ', ' + $time ); //1,2,3,4 차례로 출력
        }
    }
    bs.ANI.ani( rotate_1 );

    var rotate_2 = {
        count:0, //최초 카운트 0
        ANI:function( $time ){
            bs.Dom(rect_5).S('transform', 'rotate('+(this.count+=20)+'deg)');
            console.log( this.count + ', ' + $time ); //1,2,3,4 차례로 출력
        }
    }
    bs.ANI.ani( rotate_2 );
});
</script>
</body>
</html>
